name: Slack Notifications - Components

on:
  issues:
    types: [labeled]
  pull_request:
    types: [labeled]

jobs:
  notify:
    if: github.event.label.name == 'Ready to Dev'
    runs-on: ubuntu-latest

    steps:
      - name: Send Slack notification
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data "{
            \"text\": \"ðŸš€ *Ready to Dev*\",
            \"blocks\": [
              {
                \"type\": \"section\",
                \"text\": {
                  \"type\": \"mrkdwn\",
                  \"text\": \"*${{ github.event.issue.title || github.event.pull_request.title }}*\"
                }
              },
              {
                \"type\": \"context\",
                \"elements\": [
                  {
                    \"type\": \"mrkdwn\",
                    \"text\": \"ðŸ“¦ Repo: *${{ github.repository }}*\"
                  },
                  {
                    \"type\": \"mrkdwn\",
                    \"text\": \"ðŸ‘¤ Movido por: *${{ github.actor }}*\"
                  }
                ]
              },
              {
                \"type\": \"section\",
                \"text\": {
                  \"type\": \"mrkdwn\",
                  \"text\": \"ðŸ”— <${{ github.event.issue.html_url || github.event.pull_request.html_url }}|Abrir no GitHub>\"
                }
              }
            ]
          }" \
          ${{ secrets.UI_UPDATE_SLACK }}
